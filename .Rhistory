"No religion - Unmarried",
"Christian - Unmarried"))) %>%
filter(!is.na(MAR_RELIG),MAR_RELIG!="Other") %>%
group_by(SEXFREQ,MAR_RELIG) %>%
count() %>%
group_by(MAR_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=MAR_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Religion and Marital Status") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey (2013 - 2018).")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
MAR_RELIG=case_when(RELIG=="None" & MARITAL=="Married"~"No religion - Married",
RELIG=="None"~"No religion - Unmarried",
RELIG=="Christian" & MARITAL=="Married"~"Christian - Married",
RELIG=="Christian"~"Christian - Unmarried"),
MAR_RELIG=ordered(MAR_RELIG, levels=c("No religion - Married",
"Christian - Married",
"No religion - Unmarried",
"Christian - Unmarried"))) %>%
filter(!is.na(MAR_RELIG),MAR_RELIG!="Other") %>%
group_by(SEXFREQ,MAR_RELIG) %>%
count() %>%
group_by(MAR_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=MAR_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Religion and Marital Status") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey (2013 - 2018).")
blogdown::build_site()
blogdown::build_site(build_rmd = "religion_and_sex.Rmd")
blogdown::build_site(build_rmd = "content/post/religion_and_sex.Rmd")
blogdown::build_site(build_rmd = "content/post/religion_and_sex.Rmd")
blogdown::build_site(build_rmd = "content/post/religion_and_sex.Rmd")
blogdown::build_site(build_rmd = "content/post/religion_and_sex.Rmd")
blogdown::build_site(build_rmd = "content/post/religion_and_sex.Rmd")
blogdown::build_site(build_rmd = "content/post/religion_and_sex.Rmd")
knitr::opts_chunk$set(echo = TRUE)
require(dplyr)
require(tidyr)
require(ggplot2)
require(eivtools)
require(brms)
require(kableExtra)
require(readr)
require(lubridate)
require(stringr)
require(ggthemes)
require(forcats)
require(binom)
set.seed(662817)
knitr::opts_chunk$set(warning=F,message=F,fig.align = "center")
# they have their own script to read in GSS data
source("data/religion_and_sex/GSS.r")
# recode GSS
GSS <- mutate(GSS,
SEXFREQ=ordered(SEXFREQ,levels=c(0:6),
labels=c("Not at all","Once or twice",
"Once a month",
"2-3 times a month",
"Weekly",
"2-3 per week",
"4+ per week"),
exclude=NA),
RELIG=factor(RELIG,levels=c(1:13),
labels=c("Protestant",
"Catholic",
"Jewish",
"None",
"Other",
"Buddhism",
"Hinduism",
"Other Eastern",
"Muslim",
"Orthodox",
"Christian",
"Native American",
"Inter")),
PRAY=ordered(PRAY,levels=c(1:6),
labels=c("Several times a day",
"Once a day",
"Several times a week",
"Once a week",
"Less than once a week",
"Never")),
BIBLE=factor(BIBLE,levels=c(1:4),
labels=c("Actual word","Inspired word","Ancient book",
"Other")),
MARITAL=factor(MARITAL,levels=c(1:5),
labels=c("Married",
"Widowed",
"Divorced",
"Separated",
"Never Married")))
GSS %>%
filter(!is.na(SEXFREQ)) %>%
group_by(SEXFREQ,YEAR) %>%
count() %>%
group_by(YEAR) %>%
mutate(prop_n=n/sum(n)) %>%
ggplot(aes(y=prop_n,x=YEAR)) +
geom_area(fill="blue",alpha=0.5) +
facet_wrap(~SEXFREQ,scale="free_y") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
labs(y="Percent Reporting",x="Year of Survey") +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
!(RELIG %in% c("Native American","Inter","Other Eastern","Other","Buddhism","Hinduism","Orthodox","Christian","Muslim")),
YEAR!=2012) %>%
group_by(SEXFREQ,RELIG,YEAR) %>%
count() %>%
group_by(YEAR,RELIG) %>%
mutate(prop_n=n/sum(n)) %>%
ggplot(aes(y=prop_n,x=YEAR)) +
geom_line(aes(colour=RELIG,linetype=RELIG)) +
facet_wrap(~SEXFREQ,scale="free_y") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Year of Survey") +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012) %>%
mutate(RELIG=fct_collapse(RELIG,
Other=c("Other Eastern","Other",
"Native American","Inter",
"Christian","Orthodox"))) %>%
group_by(SEXFREQ,RELIG) %>%
count() %>%
group_by(RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper,
RELIG=factor(RELIG,levels=c("Protestant","Catholic",
"None","Jewish","Muslim","Hinduism",
"Buddhism","Other"))) %>%
ggplot(aes(y=prop_n,x=RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Religious Tradition") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
PRAY_RELIG=ifelse(RELIG!="Christian","No religion",as.character(PRAY)),
PRAY_RELIG=ordered(PRAY_RELIG, levels=c("No religion","Several times a day",
"Once a day",
"Several times a week",
"Once a week",
"Less than once a week",
"Never"))) %>%
filter(!is.na(PRAY_RELIG)) %>%
group_by(SEXFREQ,PRAY_RELIG) %>%
count() %>%
group_by(PRAY_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=PRAY_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="How Often Do You Pray?") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
BIBLE_RELIG=ifelse(RELIG!="Christian","No religion",as.character(BIBLE)),
BIBLE_RELIG=ordered(BIBLE_RELIG, levels=c("No religion","Actual word","Inspired word","Ancient book",
"Other"))) %>%
filter(!is.na(BIBLE_RELIG),BIBLE_RELIG!="Other") %>%
group_by(SEXFREQ,BIBLE_RELIG) %>%
count() %>%
group_by(BIBLE_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=BIBLE_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Beliefs About the Bible") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
MAR_RELIG=case_when(RELIG=="None" & MARITAL=="Married"~"No religion - Married",
RELIG=="None"~"No religion - Unmarried",
RELIG=="Christian" & MARITAL=="Married"~"Christian - Married",
RELIG=="Christian"~"Christian - Unmarried"),
MAR_RELIG=ordered(MAR_RELIG, levels=c("No religion - Married",
"Christian - Married",
"No religion - Unmarried",
"Christian - Unmarried"))) %>%
filter(!is.na(MAR_RELIG),MAR_RELIG!="Other") %>%
group_by(SEXFREQ,MAR_RELIG) %>%
count() %>%
group_by(MAR_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=MAR_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Religion and Marital Status") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey (2013 - 2018).")
blogdown::build_site(build_rmd="content/post/religion_and_sex.Rmd")
blogdown::build_site(build_rmd="content/post/religion_and_sex.Rmd")
knitr::opts_chunk$set(echo = TRUE)
require(dplyr)
require(tidyr)
require(ggplot2)
require(eivtools)
require(brms)
require(kableExtra)
require(readr)
require(lubridate)
require(stringr)
require(ggthemes)
require(forcats)
require(binom)
set.seed(662817)
knitr::opts_chunk$set(warning=F,message=F,fig.align = "center")
# they have their own script to read in GSS data
source("data/religion_and_sex/GSS.r")
# recode GSS
GSS <- mutate(GSS,
SEXFREQ=ordered(SEXFREQ,levels=c(0:6),
labels=c("Not at all","Once or twice",
"Once a month",
"2-3 times a month",
"Weekly",
"2-3 per week",
"4+ per week"),
exclude=NA),
RELIG=factor(RELIG,levels=c(1:13),
labels=c("Protestant",
"Catholic",
"Jewish",
"None",
"Other",
"Buddhism",
"Hinduism",
"Other Eastern",
"Muslim",
"Orthodox",
"Christian",
"Native American",
"Inter")),
PRAY=ordered(PRAY,levels=c(1:6),
labels=c("Several times a day",
"Once a day",
"Several times a week",
"Once a week",
"Less than once a week",
"Never")),
BIBLE=factor(BIBLE,levels=c(1:4),
labels=c("Actual word","Inspired word","Ancient book",
"Other")),
MARITAL=factor(MARITAL,levels=c(1:5),
labels=c("Married",
"Widowed",
"Divorced",
"Separated",
"Never Married")))
GSS %>%
filter(!is.na(SEXFREQ)) %>%
group_by(SEXFREQ,YEAR) %>%
count() %>%
group_by(YEAR) %>%
mutate(prop_n=n/sum(n)) %>%
ggplot(aes(y=prop_n,x=YEAR)) +
geom_area(fill="blue",alpha=0.5) +
facet_wrap(~SEXFREQ,scale="free_y") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
labs(y="Percent Reporting",x="Year of Survey") +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
!(RELIG %in% c("Native American","Inter","Other Eastern","Other","Buddhism","Hinduism","Orthodox","Christian","Muslim")),
YEAR!=2012) %>%
group_by(SEXFREQ,RELIG,YEAR) %>%
count() %>%
group_by(YEAR,RELIG) %>%
mutate(prop_n=n/sum(n)) %>%
ggplot(aes(y=prop_n,x=YEAR)) +
geom_line(aes(colour=RELIG,linetype=RELIG)) +
facet_wrap(~SEXFREQ,scale="free_y") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Year of Survey") +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012) %>%
mutate(RELIG=fct_collapse(RELIG,
Other=c("Other Eastern","Other",
"Native American","Inter",
"Christian","Orthodox"))) %>%
group_by(SEXFREQ,RELIG) %>%
count() %>%
group_by(RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper,
RELIG=factor(RELIG,levels=c("Protestant","Catholic",
"None","Jewish","Muslim","Hinduism",
"Buddhism","Other"))) %>%
ggplot(aes(y=prop_n,x=RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Religious Tradition") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
PRAY_RELIG=ifelse(RELIG!="Christian","No religion",as.character(PRAY)),
PRAY_RELIG=ordered(PRAY_RELIG, levels=c("No religion","Several times a day",
"Once a day",
"Several times a week",
"Once a week",
"Less than once a week",
"Never"))) %>%
filter(!is.na(PRAY_RELIG)) %>%
group_by(SEXFREQ,PRAY_RELIG) %>%
count() %>%
group_by(PRAY_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=PRAY_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="How Often Do You Pray?") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
BIBLE_RELIG=ifelse(RELIG!="Christian","No religion",as.character(BIBLE)),
BIBLE_RELIG=ordered(BIBLE_RELIG, levels=c("No religion","Actual word","Inspired word","Ancient book",
"Other"))) %>%
filter(!is.na(BIBLE_RELIG),BIBLE_RELIG!="Other") %>%
group_by(SEXFREQ,BIBLE_RELIG) %>%
count() %>%
group_by(BIBLE_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=BIBLE_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Beliefs About the Bible") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey")
GSS %>%
filter(!is.na(SEXFREQ),
!is.na(RELIG),
YEAR>2012,
RELIG %in% c("None","Protestant","Catholic")) %>%
mutate(RELIG=fct_collapse(RELIG,Christian=c("Protestant","Catholic")),
MAR_RELIG=case_when(RELIG=="None" & MARITAL=="Married"~"No religion - Married",
RELIG=="None"~"No religion - Unmarried",
RELIG=="Christian" & MARITAL=="Married"~"Christian - Married",
RELIG=="Christian"~"Christian - Unmarried"),
MAR_RELIG=ordered(MAR_RELIG, levels=c("No religion - Married",
"Christian - Married",
"No religion - Unmarried",
"Christian - Unmarried"))) %>%
filter(!is.na(MAR_RELIG),MAR_RELIG!="Other") %>%
group_by(SEXFREQ,MAR_RELIG) %>%
count() %>%
group_by(MAR_RELIG) %>%
mutate(prop_n=n/sum(n),
lower=binom.confint(n,sum(n),method="bayes")$lower,
upper=binom.confint(n,sum(n),method="bayes")$upper) %>%
ggplot(aes(y=prop_n,x=MAR_RELIG)) +
geom_pointrange(aes(ymin=lower,ymax=upper),
colour="blue",alpha=0.5,size=.1) +
facet_wrap(~SEXFREQ,scales="free_x") +
theme_tufte() +
scale_y_continuous(labels=scales::percent_format(accuracy = 1)) +
scale_colour_viridis_d() +
labs(y="Percent Reporting",x="Religion and Marital Status") +
coord_flip() +
ggtitle("About how often did you have sex during the last 12 months?",subtitle="Data from General Social Survey (2013 - 2018).")
?blogdown::build_site
blogdown::build_site(build_rmd="content/post/alt_apsa_2021.Rmd")
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
install.packages("vitae")
?vitae::bibliography_entries
install.packages("osfr")
require(osfr)
?`osfr-package`
osfr::osf_auth("3WPfroWNg0rkUmoIUdOcdUt185dXFEqM222kZ31kVBcIFQdezATdhsKswhGxPbQY7hXbN7")
?osf_auth
osf_retrieve_file("me")
osf_retrieve_user("me")
osf_retrieve_user("me",config(cainfo="/usr/local/opt/openssl@3/certs/cacert_new.pem"))
?osf_create
require(httr)
httr::set_config(config(cainfo="/usr/local/opt/openssl@3/certs/cacert_new.pem"))
osf_retrieve_user("me",config(cainfo="/usr/local/opt/openssl@3/certs/cacert_new.pem"))
osf_retrieve_user("me")
require(dplyr)
require(tidyr)
require(ggplot2)
require(ggdag)
require(ggthemes)
require(readr)
require(tidycensus)
require(lubridate)
#require(plm)
set.seed(1062021)
if(knitr::is_latex_output()) {
tikz_fig <- 'pdf'
} else if(knitr::is_html_output()) {
tikz_fig <- 'svg'
} else {
tikz_fig <- 'svg'
}
knitr::opts_chunk$set(warning=FALSE,message=FALSE,echo=TRUE,fig.align = "center",echo=FALSE)
knitr::include_graphics("static/img/xu_sequential.png")
knitr::include_graphics("/img/xu_sequential.png")
setwd("~/saudiwin.github.io/static")
knitr::include_graphics("/img/xu_sequential.png")
blogdown::serve_site()
blogdown::install_hugo()
blogdown::serve_site()
blogdown::build_site()
blogdown::build_site()
?blogdown::build_site
setwd("~/saudiwin.github.io")
blogdown::build_site(build_rmd = "content/post/panel_dag.Rmd")
